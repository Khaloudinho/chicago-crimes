<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Question 1</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <style>
        /* Chart.js */
        @-webkit-keyframes chartjs-render-animation {
            from {
                opacity: 0.99
            }
            to {
                opacity: 1
            }
        }

        @keyframes chartjs-render-animation {
            from {
                opacity: 0.99
            }
            to {
                opacity: 1
            }
        }

        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }

        body {
            font-family: Arial, serif;
            text-align: center;
        }

        h1 {
            color: black;
        }

        h3 {
            color: red;
        }

    </style>
</head>

<body>
    <h1>Question 1 : the decreasing ranking of categories of crimes</h1>
    <h3>Click on a category of the legend to hide it from the graph</h3>
    <canvas id="canvas"></canvas>
</body>

<script>

    $(document).ready(function () {
        $.get('../results/question1', function (data) {
            data = data.split("\r");
            var labels = [], values = [];

            for (var i = 0; i < data.length; i++) {
                var line = data[i].replace(/\n/ig, '');
                if (line.split("\t")[0] != null && line.split("\t")[0] !== '') labels.push(line.split("\t")[0]);
                if (line.split("\t")[0] != null && line.split("\t")[0] !== '') values.push(line.split("\t")[1]);
            }

            function getRandomColor() {
                var letters = '0123456789ABCDEF';
                var color = '#';
                for (var i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }

            var ctx = document.getElementById("canvas").getContext("2d");
            var barChartData = {
                datasets: []
            };


            for (i = 0; i < labels.length; i++) {
                var color = getRandomColor();
                barChartData.datasets.push({
                    label: [labels[i]],
                    backgroundColor: color,
                    borderColor: color,
                    borderWidth: 1,
                    data: [values[i]]
                });
            }

            window.myBar = new Chart(ctx, {
                type: 'bar',
                data: barChartData,
                options: {
                    responsive: true,
                    legend: {
                        display: true
                    }
                }
            });
        });

    });

</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>

</html>