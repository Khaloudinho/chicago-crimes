<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Question 3 - Chart</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <style>
        /* Chart.js */
        @-webkit-keyframes chartjs-render-animation {
            from {
                opacity: 0.99
            }
            to {
                opacity: 1
            }
        }

        @keyframes chartjs-render-animation {
            from {
                opacity: 0.99
            }
            to {
                opacity: 1
            }
        }

        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }

    </style>
</head>

<body>
    <canvas id="canvas"></canvas>
</body>

<script>

    $(document).ready(function () {
        $.get('../results/question3', function (data) {
            data = data.split("\r");
            /*var labels = []*/var values = [];

            for (var i = 0; i < data.length; i++) {
                var line = data[i].replace(/\n/ig, '');
                if (line.split(" ")[0].length > 1) labels.push(line.split(" ")[0]);
                values.push(line.split(" ")[1]);
            }
            console.log(values);

            var markers = [];
            var map;
            var labels = 'ABCD';
            var labelIndex = 0;

            function initialize() {
                map = new google.maps.Map(
                    document.getElementById("canvas"), {
                        center: new google.maps.LatLng(40.7127837, -74.0059413),
                        zoom: 11,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    });

                addMarker({
                    lat: line.split(",")[0],
                    lng: line.split(",")[1]
                }, "red");
                addMarker({
                    lat: line.split(",")[0],
                    lng: line.split(",")[1]
                }, "green");
                addMarker({
                    lat: line.split(",")[0],
                    lng: line.split(",")[1]
                }, "yellow");
                addMarker({
                    lat: line.split(",")[0],
                    lng: line.split(",")[1]
                }, "orange");
            }

            function addMarker(location, color) {
                var marker = new google.maps.Marker({
                    position: location,
                    label: labels[labelIndex++ % labels.length],
                    icon: {
                        url: 'http://maps.google.com/mapfiles/ms/icons/' + color + '.png',
                        labelOrigin: new google.maps.Point(15, 10)
                    },
                    map: map
                });
                markers.push(marker);
            }

            var ctx = document.getElementById("canvas").getContext("2d");
            var barChartData = {
                labels: labels,
                datasets: [{
                    backgroundColor: ['rgba(255, 99, 132, 0.5)', 'rgba(54, 162, 235, 0.5)', 'rgba(255, 206, 86, 0.5)',
                    'rgba(75, 192, 192, 0.5)', 'rgba(153, 102, 255, 0.5)', 'rgba(255, 159, 64, 0.5)', 'rgba(85, 109, 64, 0.5)',
                    'rgba(199, 60, 35, 0.5)', 'rgba(255, 159, 124, 0.5)', 'rgba(225, 29, 175, 0.5)', 'rgba(98, 121, 84, 0.5)',
                    'rgba(135, 179, 224, 0.5)', 'rgba(125, 129, 105, 0.5)', 'rgba(240, 100, 24, 0.5)'],
                    borderColor: ['rgba(255, 99, 132, 0.5)', 'rgba(54, 162, 235, 0.5)', 'rgba(255, 206, 86, 0.5)',
                    'rgba(75, 192, 192, 0.5)', 'rgba(153, 102, 255, 0.5)', 'rgba(255, 159, 64, 0.5)', 'rgba(85, 109, 64, 0.5)',
                    'rgba(199, 60, 35, 0.5)', 'rgba(255, 159, 124, 0.5)', 'rgba(225, 29, 175, 0.5)', 'rgba(98, 121, 84, 0.5)',
                    'rgba(135, 179, 224, 0.5)', 'rgba(125, 129, 105, 0.5)', 'rgba(240, 100, 24, 0.5)'],
                    borderWidth: 1,
                    data: values
                }]
            };

            window.myBar = new Chart(ctx, {
                type: 'bubble',
                data: barChartData,
                options: {
                    responsive: true,
                    legend: {
                        position: 'left'
                    },
                    title: {
                        display: true,
                        text: 'Question 1 : the decreasing ranking of categories of crimes',
                        fontSize: 24,
                        fontColor: 'black'
                    }
                }
            });
        });

    });

</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>

</html>